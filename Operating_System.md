# 운영체제


---

## 운영 체제 개요

### 운영 체제란
- 컴퓨터 하드웨어 바로 윗단에 설치되어 각종 하드웨어 및 소프트웨어를 관리하고 사용자에게 편리한 인터페이스를 제공하는 소프트웨어


### 운영 체제의 주요 기능
- 자원을 효율적으로 관리 == 자원관리자
    - CPU, 메모리, 하드 디스크 등의 HW 자원뿐 아니라 SW 자원까지 효율적으로 관리
    - 사용자 및 프로그램들 간에 자원이 형평성이 있게 분배되도록 균형자 역할 수행
- 컴퓨터 시스템을 편리하게 사용할 수 있는 환경 제공
    - 운영 체제가 동시 사용자 및 프로그램들에게 각각 독자적으로 컴퓨터를 사용하는 것과 같은 환상을 제공
    - 사용자 및 프로그램은 하드웨어를 직접 다루는 복잡한 부분을 알 필요없음



### 커널(Kernel)이란
- 메모리에 상주하는 운영 체제의 핵심적인 부분
- 좁은 의미의 운영 체제

>cf. 운영체제 자체도 하나의 소프트웨어로 전원이 켜짐과 동시에 메모리에 올라간다. 하지만, 운영체제처럼 규모가 큰 프로그램이 모두 메모리에 올라간다면 메모리 낭비가 심할 것임. 따라서, 운영 체제 중 항상 필요한 부분만 전원이 켜짐과 동시에 메모리에 올려놓고 나머지는 필요할 때 메모리에 올려서 사용


### 운영 체제의 분류
1. 동시 작업 지원
    - 단일 작업(Single Tasking)용 OS
        - 한 번에 하나의 프로그램만 수행시킴
        - 하나의 프로그램이 끝나기 전에 다른 프로그램을 수행시키는 것이 불가능
        - ex) DOS
    - 다중 작업(Multi Tasking)용 OS
        - 여러 프로그램이 CPU와 메모리를 공유
        - 하나의 프로그램이 끝나기 전에 다른 프로그램을 수행시키는 것이 가능
        - ex) MS 윈도우, 유닉스

> cf. 
>- 다중 프로그래밍 시스템(Multi-Programming System) : 여러 프로그램들을 동시에 메모리에 올려놓고 처리하는 시스템
>- 다중 처리기 시스템(Multi-Processor System) : 하나의 컴퓨터 안에 여러 개의 CPU가 설치된 시스템

2. 다중 사용자의 동시 지원
    - 단일 사용자용 운영 체제
        - 한 번에 한 명의 사용만이 사용
        - ex) DOS
    - 다중 사용자용 운영 체제
        - 여러 사용자가 동시에 접속해 사용
        - ex) 이메일 서버, 웹 서버


3. 작업 처리 방식
    - 일괄 처리(bathc Processing) 운영 체제
        - 처리할 여러 작업들을 모아 일정량 쌓이면 일괄적으로 처리하여 작업이 완전히 끝난 후 결과를 얻음 >> 긴 응답 시간
    - 시분할(Time Sharig) 운영 체제
        - 처리할 여러 작업들을 일정한 시간 단위로 분할해 사용 >> 짧은 응답 시간
    - 실시간(Real Time) 운영 체제
        - 정해진 시간 안에 어떠한 일이 반드시 종료됨이 보장되어야 하는 시스템
        - 시간 내 작업 완료가 될 경우, 큰 위험을 초래할 가능성이 있음
        - ex) 원자로, 공장 제어, 미사일 제어 시스템

### 자원관리자로서의 운영 체제
1. CPU 스케줄링
    - FCFS(First Come First Served)
        - 장시간 CPU를 사용하는 프로세스가 먼저 도착, 단시간 CPU를 사용하는 프로세스들이 뒤이어 도착 >> 오랜 시간 기다림 
    - 라운드 로빈(Round Robin)
        - CPU를 한 번 할당받아 사용할 수 있는 시간을 정함
        - 일반적으로 1회 할당 시간은 수 밀리 세컨드(ms) 사용
    - 우선 순위(Priority)
        - 대기중인 프로세스들에게 우선 순위 부여 후 높은 우선 순위 프로세스를 먼저 실행
        - 중요한 프로세스 우선 실행 방법, 기다린 시간에 비례하여 우선순위를 점차 높여주는 방법 등이 있음 

2. (물리적) 메모리 관리
    - 고정 분할(Fixed Partition) 방식
        - 물리적 메모리를 몇 개의 영구적인 분할로 나눔
        - 분할된 한 영역에 한 프로그램씩 적재되어 사용
        - 분할된 영역이 너무 작아도 문제, 너무 커도 문제 >> 융통성이 없음
        ![fragmentation](./img/memory_fragmentation.jpg)

    - 가변 분할(Variable Partition) 방식
        - 매 시점 프로그램의 크기에 맞게 메모리를 분할해서 사용하는 방식
        - 내부 단편화는 발생 X, 외부 단편화는 여전히 발생
        > cf. 외부 단편화 : 프로그램에게 할당되지 않은 메모리 영역이지만 그 크기가 작아 프로그램을 올리지 못하는 메모리 영역

    - 가상 메모리(Virtual Memory) 방식
        - 프로그램에서 당장 사용될 부분만 메모리에 올리고 나머지 부분은 보조 기억 장치에 저장해두고 필요할 때 적재하는 방식
        - 현재 모든 컴퓨터 시스템에서 사용하는 방식
        - 물리적 메모리보다 더 큰 프로그램이 실행되는 것을 지원
        - 가상 메모리 주소를 물리적 메모리 주소로 매핑하는 기술이 필요

3. 입출력 관리
    - 각종 입출력 장치들과 컴퓨터 사이의 정보를 주고 받기 위해 운영 체제가 필요
    - 입출력 장치는 **인터럽트**를 통해 CPU의 서비스를 요청함
    - ex) 사용자가 키보드에 글자 입력 >> 키보드는 사용자로부터 입력이 들어왔음을 알리기위해 CPU에게 인터럽트 신호를 보냄 >> CPU는 실행중인 프로세스를 멈추고 인터럽트를 처리하기 위한 작업을 수행 >> 인터럽트 처리 완료 후, 아까 실행중이던 프로세스를 재개

4. 파일 관리
    - 전원이 꺼져도 기억해야하는 정보를 보관하기 위해 보조 기억 장치에 파일 형태로 저장
    - 디스크에 파일을 어떻게 보관할 것인가, 파일에 대한 접근 권한에 대해서도 운영체제가 관리


---

## 컴퓨터 시스템의 동작 

### 컴퓨터 시스템의 구조
- CPU, 주기억장치(메모리), 입출력장치

### CPU와 I/O 연산
- 입출력 장치는 입출력 컨트롤러(Controller)와 로컬 버퍼(Local Buffer)를 가짐
    - 컨트롤러 : 각 하드웨어 장치를 제어하는 작은 CPU
    - 로컬 버퍼 : 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리를 가짐
- ![computer_structure](./img/computer_structure.jpg)
